# 1-Wire

**Функционал поддерживается только для [Pro](/sls_pro.md) версии.**

Шлюз работает в режиме монитора шины и все обнаруженные устройства сохраняются во внутренней базе данных.

На данный момент она рассчитана на 20 устройств, возможно увеличение количества в дальнейшем.

Если Вам необходима поддержка большего количества, сообщите об этом.

## Как работает

Работа шлюза 1-Wire реализована на выделенном мастере шины.
Подключение резисторов подтяжки не требуется, есть активная подтяжка шины.

Подключение возможно как в активном (3 проводное), так и пассивном режиме (2 проводное).
Для питания есть выход +5V.

Сканирование шины происходит при старте контроллера и далее каждые 5 минут.
Чтение данных датчиков каждые 60 секунд.

## Поддерживаемые устройства

- DS18B20 (0x28) - калиброванный цифровой датчик температуры (12bit)
- DS1822 (0x22) - калиброванный цифровой датчик температуры (12bit)
- DS18S20 (0x10) - калиброванный цифровой датчик температуры (9bit)

Если Вам необходима поддержка других устройств, сообщите об этом.

## Web-интерфейс

При наличии мастера шины, в веб-интерфейсе автоматически появляется раздел 1-Wire.
![icon](devices/images/sls_1wire.png)

В веб-интерфейсе видны все обнаруженные датчики и можно вручную просканировать шину.

## MQTT

При получении новых данных с датчиков, они публикуются в топик вида: _1wire/28-XXXXXXXXXXXX/temperature_

## Работа из скриптов

При получении новых данных с датчиков, они публикуются в объекты вида: _1w.28-XXXXXXXXXXXX/temperature_

Вывести в лог данные с датчика 28-XXXXXXXXXXXX:

```lua
local t = obj.get('1w.28-XXXXXXXXXXXX/temperature')
print(t)
```
