# MQTT

Шлюз умеет подключаться к MQTT-брокеру как клиент, получать и отправлять данные в топики.

## Работа с MQTT из скриптов

**mqtt.pub()**

Синтаксис: mqtt.pub(topic, payload)

Публикует на MQTT сервер в топик topic значение payload.

Пример управления реле на прошивке Tasmota - cmnd/имя устройства/имя реле
```lua
mqtt.pub('cmnd/sonoff5/power', 'toggle')
```

**mqtt.sub**

Синтаксис: mqtt.sub(Topic, ObjName)

Подписывается на топик и помещает полученые значения в объект.

Можно вызывать повторно с другим именем объекта, для его изменения.

Пример подписки на топик с температурой, которую шлюз помещает в объект:
```lua
mqtt.sub('dev/sensor/temp', 'room_temp')
```

**mqtt.unSub**

Синтаксис: mqtt.unSub(Topic)

Отписывается от топика.

```lua
mqtt.unSub('dev/sensor/temp')
```

**mqtt.connected()**

Проверяет подключение к брокеру

